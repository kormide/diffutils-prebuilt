########################
# Import bazelrc presets
import %workspace%/tools/preset.bazelrc

########################
# Project-specific flags
# This is also a place to override settings from the presets


# Determines whether C++ binaries will be linked dynamically, interacting with the linkstatic attribute on common rules.
# off: Links all targets in mostly static mode. If -static is set in linkopts, targets will change to fully static.
common --dynamic_mode=off

# Don't clobber bazel-out/[platform]/bin
common --experimental_platform_in_output_dir

common --incompatible_strict_action_env
common --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common --repo_env=BAZEL_NO_APPLE_CPP_TOOLCHAIN=1

common --nobuild_runfile_links

common:release -c opt
common:release --strip=always
common:release --stripopt=--strip-all
common:release --features=thin_lto
common:release --copt=-flto=thin

########################
# User preferences
# Load any settings & overrides specific to the current user from `user.bazelrc`.
# This file should appear in `.gitignore` so that settings are not shared with team members.
# This should be last statement in this config so the user configuration overrides anything above.
try-import %workspace%/user.bazelrc
